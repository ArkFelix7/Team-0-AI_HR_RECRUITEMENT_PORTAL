# ğŸ—ï¸ HR Portal - System Architecture

## ğŸ“ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”‚                     (React + TypeScript)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   JobList    â”‚  â”‚ CandidateListâ”‚  â”‚CandidateDetailâ”‚        â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚        â”‚
â”‚  â”‚ â€¢ Create job â”‚  â”‚ â€¢ Add cand.  â”‚  â”‚ â€¢ View all   â”‚        â”‚
â”‚  â”‚ â€¢ View jobs  â”‚  â”‚ â€¢ Upload PDF â”‚  â”‚ â€¢ Resume tab â”‚        â”‚
â”‚  â”‚ â€¢ Delete job â”‚  â”‚ â€¢ Analyze AI â”‚  â”‚ â€¢ Call tab   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ Interview  â”‚        â”‚
â”‚         â”‚                 â”‚           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                  â”‚
          â–¼                 â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       SERVICE LAYER                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  supabaseService.ts    â”‚      â”‚  geminiService.ts   â”‚      â”‚
â”‚  â”‚                        â”‚      â”‚                     â”‚      â”‚
â”‚  â”‚ â€¢ Job CRUD             â”‚      â”‚ â€¢ analyzeResume()   â”‚      â”‚
â”‚  â”‚ â€¢ Candidate CRUD       â”‚      â”‚ â€¢ analyzeCall()     â”‚      â”‚
â”‚  â”‚ â€¢ Resume Analysis CRUD â”‚      â”‚ â€¢ analyzeInterview()â”‚      â”‚
â”‚  â”‚ â€¢ Call Session CRUD    â”‚      â”‚                     â”‚      â”‚
â”‚  â”‚ â€¢ Video Interview CRUD â”‚      â”‚ (Google Gemini AI)  â”‚      â”‚
â”‚  â”‚ â€¢ File Upload/Delete   â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUPABASE BACKEND                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   PostgreSQL DB     â”‚          â”‚   Storage Buckets    â”‚    â”‚
â”‚  â”‚                     â”‚          â”‚                      â”‚    â”‚
â”‚  â”‚ â€¢ jobs              â”‚          â”‚ â€¢ resumes/           â”‚    â”‚
â”‚  â”‚ â€¢ candidates        â”‚          â”‚ â€¢ call-recordings/   â”‚    â”‚
â”‚  â”‚ â€¢ resume_analysis   â”‚          â”‚ â€¢ video-interviews/  â”‚    â”‚
â”‚  â”‚ â€¢ call_sessions     â”‚          â”‚                      â”‚    â”‚
â”‚  â”‚ â€¢ video_interviews  â”‚          â”‚ (Files: PDF, WebM)   â”‚    â”‚
â”‚  â”‚ â€¢ interview_analysisâ”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagrams

### 1ï¸âƒ£ Resume Screening Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HR     â”‚
â”‚ (User)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 1. Create Job
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JobList    â”‚ â”€â”€â”€â”€â”€â”€â–º supabase.from('jobs').insert()
â”‚ Component   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Add Candidate + PDF
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CandidateListâ”‚â”€â”€â”
â”‚  Component   â”‚  â”‚ a. Extract PDF text
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    (pdfParser.ts)
     â”‚            â”‚
     â”‚            â–¼
     â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚       â”‚  Resume Text â”‚
     â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚            â”‚
     â”‚            â”œâ”€â”€â–º Upload PDF to Storage
     â”‚            â”‚
     â”‚            â””â”€â”€â–º supabase.from('candidates').insert({
     â”‚                    resume_text,
     â”‚                    resume_file_url
     â”‚                })
     â”‚
     â”‚ 3. Click "Analyze Candidates"
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ geminiService.  â”‚â”€â”€â–º Gemini API
â”‚ analyzeResume() â”‚    (AI Analysis)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Returns: { score, strengths, weaknesses }
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ supabase.from(   â”‚
â”‚ 'resume_analysis'â”‚
â”‚ ).insert()       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update Rankings  â”‚
â”‚ for all candidatesâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2ï¸âƒ£ Call Scheduling Flow (Future Integration)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CandidateDetailâ”‚
â”‚   Component   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1. Click "Schedule Call"
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CallScheduler   â”‚  (To be integrated)
â”‚   Component      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 2. Conduct call
         â”‚    - Record audio
         â”‚    - Generate transcript
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI Gemini       â”‚
â”‚ Live Session    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 3. Call ends
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ geminiService.      â”‚â”€â”€â–º Analyze transcript
â”‚ analyzeCallTranscript()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Returns: { confirmedSlot, summary, 
         â”‚           personalityAnalysis }
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Upload audio to  â”‚
â”‚ Storage          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ supabase.from(     â”‚
â”‚ 'call_sessions'    â”‚
â”‚ ).insert({         â”‚
â”‚   call_audio_url,  â”‚
â”‚   transcript,      â”‚
â”‚   analysis...      â”‚
â”‚ })                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update candidate   â”‚
â”‚ status to          â”‚
â”‚ 'CALL_COMPLETED'   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3ï¸âƒ£ Video Interview Flow (Future Integration)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CandidateDetailâ”‚
â”‚   Component   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ 1. Click "Start Interview"
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VideoInterview   â”‚  (To be integrated)
â”‚   Component      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 2. Conduct interview
         â”‚    - Record video
         â”‚    - Detect emotions
         â”‚    - Generate transcript
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gemini Live     â”‚
â”‚ + Emotion API   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 3. Interview ends
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ geminiService.      â”‚â”€â”€â–º Analyze interview
â”‚ analyzeInterview()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Returns: { confidence, knowledge,
         â”‚           communication, emotion... }
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Upload video to  â”‚
â”‚ Storage          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ supabase.from(     â”‚
â”‚ 'video_interviews' â”‚
â”‚ ).insert({...})    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ supabase.from(     â”‚
â”‚'interview_analysis'â”‚
â”‚ ).insert({         â”‚
â”‚   scores,          â”‚
â”‚   strengths,       â”‚
â”‚   emotions...      â”‚
â”‚ })                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update candidate   â”‚
â”‚ status to          â”‚
â”‚'INTERVIEW_COMPLETED'â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      jobs       â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)         â”‚â—„â”€â”€â”€â”€â”€â”€â”
â”‚ title           â”‚       â”‚
â”‚ department      â”‚       â”‚
â”‚ description     â”‚       â”‚
â”‚ status          â”‚       â”‚
â”‚ created_at      â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
                          â”‚ job_id (FK)
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      candidates         â”‚                 â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id (PK)                 â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ job_id (FK) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚          â”‚
â”‚ name                                      â”‚          â”‚
â”‚ email                                     â”‚          â”‚
â”‚ resume_text                               â”‚          â”‚
â”‚ resume_file_url                           â”‚          â”‚
â”‚ status                                    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                     â”‚                                 â”‚
                     â”‚ candidate_id (FK)               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚              â”‚                  â”‚        â”‚
       â–¼             â–¼              â–¼                  â–¼        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚resume_analysisâ”‚ â”‚call_    â”‚ â”‚video_    â”‚ â”‚interview_     â”‚ â”‚  (more)    â”‚
â”‚              â”‚ â”‚sessions  â”‚ â”‚interviewsâ”‚ â”‚analysis       â”‚ â”‚            â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚id (PK)       â”‚ â”‚id (PK)   â”‚ â”‚id (PK)   â”‚ â”‚id (PK)        â”‚ â”‚            â”‚
â”‚candidate_id  â”‚ â”‚candidate â”‚ â”‚candidate â”‚ â”‚video_interviewâ”‚ â”‚            â”‚
â”‚score         â”‚ â”‚_id (FK)  â”‚ â”‚_id (FK)  â”‚ â”‚_id (FK)       â”‚ â”‚            â”‚
â”‚ranking       â”‚ â”‚audio_url â”‚ â”‚video_url â”‚ â”‚candidate_id   â”‚ â”‚            â”‚
â”‚strengths     â”‚ â”‚transcriptâ”‚ â”‚transcriptâ”‚ â”‚_id (FK) â”€â”€â”€â”€â”€â”€â”˜ â”‚            â”‚
â”‚weaknesses    â”‚ â”‚summary   â”‚ â”‚emotions  â”‚ â”‚scores...      â”‚ â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          CLIENT (Browser)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  .env file (local only)                     â”‚
â”‚  â”œâ”€ VITE_SUPABASE_URL                      â”‚
â”‚  â”œâ”€ VITE_SUPABASE_ANON_KEY (public)        â”‚
â”‚  â””â”€ VITE_GEMINI_API_KEY (should be server) â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ HTTPS
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SUPABASE BACKEND                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  Row Level Security (RLS)                   â”‚
â”‚  â”œâ”€ Current: Allow all (dev mode)           â”‚
â”‚  â””â”€ Production: Add auth checks             â”‚
â”‚                                             â”‚
â”‚  Storage Policies                           â”‚
â”‚  â”œâ”€ Current: Public buckets                 â”‚
â”‚  â””â”€ Production: Authenticated only          â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”’ Production Security Checklist

```
Current State (Dev):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  No authentication required   â”‚
â”‚ âš ï¸  Open RLS policies            â”‚
â”‚ âš ï¸  Public storage buckets       â”‚
â”‚ âš ï¸  Client-side API keys         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Production Requirements:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Supabase Auth enabled         â”‚
â”‚ âœ… RLS by user/role              â”‚
â”‚ âœ… Private buckets               â”‚
â”‚ âœ… Server-side API keys          â”‚
â”‚ âœ… Input validation              â”‚
â”‚ âœ… Rate limiting                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Component Dependency Graph

```
App.tsx
  â”‚
  â”œâ”€â–º JobList.tsx
  â”‚     â”‚
  â”‚     â””â”€â–º supabaseService.ts
  â”‚           â”œâ”€â–º supabase.ts (client)
  â”‚           â””â”€â–º types/
  â”‚
  â”œâ”€â–º CandidateList.tsx
  â”‚     â”‚
  â”‚     â”œâ”€â–º supabaseService.ts
  â”‚     â”œâ”€â–º geminiService.ts
  â”‚     â””â”€â–º pdfParser.ts
  â”‚
  â””â”€â–º CandidateDetail.tsx
        â”‚
        â””â”€â–º supabaseService.ts
```

---

## ğŸ”Œ Integration Points Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   EXISTING APPS                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  gemini-hr-co-pilot (3)/                               â”‚
â”‚  â”œâ”€ Resume analysis â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ… INTEGRATED            â”‚
â”‚  â”œâ”€ PDF parsing     â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ… INTEGRATED            â”‚
â”‚  â””â”€ Candidate ranking â”€â”€â”€â”€â”€â”€â–º âœ… INTEGRATED            â”‚
â”‚                                                         â”‚
â”‚  gemini-ai-interview-scheduler-with-dual-recording/     â”‚
â”‚  â”œâ”€ Call components â”€â”€â”€â”€â”€â”€â”€â”€â–º ğŸ”Œ READY TO INTEGRATE   â”‚
â”‚  â”œâ”€ LiveAPI session â”€â”€â”€â”€â”€â”€â”€â”€â–º ğŸ”Œ Hook: saveCallSession()â”‚
â”‚  â””â”€ Audio recording â”€â”€â”€â”€â”€â”€â”€â”€â–º ğŸ”Œ Storage ready         â”‚
â”‚                                                         â”‚
â”‚  ai-technical-interviewer/                              â”‚
â”‚  â”œâ”€ Interview components â”€â”€â”€â–º ğŸ”Œ READY TO INTEGRATE   â”‚
â”‚  â”œâ”€ Video recording â”€â”€â”€â”€â”€â”€â”€â”€â–º ğŸ”Œ Hook: saveVideoInterview()â”‚
â”‚  â”œâ”€ Emotion detection â”€â”€â”€â”€â”€â”€â–º ğŸ”Œ Storage ready         â”‚
â”‚  â””â”€ Analysis â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ğŸ”Œ Hook: saveInterviewAnalysis()â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Storage Architecture

```
Supabase Storage
â”‚
â”œâ”€â”€ resumes/
â”‚   â””â”€â”€ {job_id}/
â”‚       â”œâ”€â”€ {timestamp}_resume1.pdf
â”‚       â”œâ”€â”€ {timestamp}_resume2.pdf
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ call-recordings/
â”‚   â””â”€â”€ {candidate_id}/
â”‚       â”œâ”€â”€ {timestamp}_call_recording.webm
â”‚       â””â”€â”€ ...
â”‚
â””â”€â”€ video-interviews/
    â””â”€â”€ {candidate_id}/
        â”œâ”€â”€ {timestamp}_interview.webm
        â””â”€â”€ ...

File Naming Pattern:
{timestamp}_{description}.{ext}

Example:
1699123456789_call_recording.webm
1699234567890_interview.webm
```

---

## ğŸ¯ State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         App-Level State                 â”‚
â”‚         (useState in App.tsx)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â€¢ jobs: Job[]                          â”‚
â”‚  â€¢ selectedJobId: string | null         â”‚
â”‚  â€¢ selectedCandidateId: string | null   â”‚
â”‚  â€¢ loading: boolean                     â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€â”€â–º JobList (props)
            â”‚     â€¢ jobs
            â”‚     â€¢ selectedJobId
            â”‚     â€¢ onSelectJob()
            â”‚     â€¢ onJobCreated()
            â”‚
            â”œâ”€â”€â–º CandidateList (props)
            â”‚     â€¢ jobId
            â”‚     â€¢ onViewCandidate()
            â”‚
            â””â”€â”€â–º CandidateDetail (props)
                  â€¢ candidateId
                  â€¢ onBack()

Future: Consider React Query for caching
```

---

## ğŸš€ Deployment Architecture

```
Development:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ localhost    â”‚
â”‚ :5173        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vite Dev     â”‚
â”‚ Server       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Production:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vercel/      â”‚
â”‚ Netlify CDN  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â–º Static Files (HTML/JS/CSS)
       â”‚
       â””â”€â–º API Requests
             â”‚
             â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  Supabase    â”‚
       â”‚  (Backend)   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Scalability Considerations

```
Current Setup:
â”œâ”€ Single database
â”œâ”€ Direct Supabase calls
â””â”€ Client-side processing

Future Optimizations:
â”œâ”€ Add Redis caching
â”œâ”€ Implement pagination
â”œâ”€ Use React Query
â”œâ”€ Lazy load components
â”œâ”€ Add worker threads for PDF parsing
â””â”€ Implement batch operations
```

---

## ğŸ§ª Testing Architecture (Future)

```
Unit Tests:
â”œâ”€ services/
â”‚   â”œâ”€ supabaseService.test.ts
â”‚   â””â”€ geminiService.test.ts
â”‚
Integration Tests:
â”œâ”€ components/
â”‚   â”œâ”€ JobList.test.tsx
â”‚   â”œâ”€ CandidateList.test.tsx
â”‚   â””â”€ CandidateDetail.test.tsx
â”‚
E2E Tests:
â””â”€ flows/
    â”œâ”€ job-creation.spec.ts
    â”œâ”€ candidate-addition.spec.ts
    â””â”€ full-workflow.spec.ts
```

---

This architecture provides a solid foundation for a scalable, maintainable HR recruitment platform with clear separation of concerns and integration points for future enhancements.
